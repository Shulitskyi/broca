"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const semver_1 = require("semver");
const polyfill_1 = tslib_1.__importDefault(require("./polyfill"));
const sdkVersion_1 = tslib_1.__importDefault(require("../sdkVersion"));
const availablePolyfills = {
    i18n: {
        implementation: `
    import { getResource } from 'resources';

    export function gettext(msgid) {
      var resource = getResource('text', '_' + msgid);
      if (resource === null) return String(msgid);
      return resource;
    }
    `,
        appliesTo: '<4.2.0',
    },
};
function polyfillDevice() {
    const applicablePolyfills = {};
    for (const [module, { implementation, appliesTo }] of Object.entries(availablePolyfills)) {
        const { major, minor } = sdkVersion_1.default();
        if (appliesTo === undefined ||
            semver_1.satisfies(`${major}.${minor}.0`, appliesTo)) {
            applicablePolyfills[module] = implementation;
        }
    }
    return polyfill_1.default(applicablePolyfills);
}
exports.default = polyfillDevice;
